import{_ as a,a as e}from"./index.257cab03.js";import{f as t,A as n,k as s,s as o,y as l,z as c,o as m,c as r,a as p,e as u,t as d,u as i,m as y,v as f,B as v,F as P,n as b,p as I,d as _,g,w as h,S as D,q as k,b as N}from"./vendor.fd49238e.js";import{h as w,c as j}from"./deployment.efd82eeb.js";var B={getPodEventByName:async function(a,e){const t=`/pods/${e}/event?namespace=${a}`;return(await w.get(t)).data},deletePodByName:async function(a,e){const t=`/pods/${e}?namespace=${a}`;return(await w.delete(t)).data}};const E=a=>(I("data-v-6e013e19"),a=a(),_(),a),$=E((()=>p("h3",null,"Deployment Detail",-1))),L={class:"deployment-container"},T=E((()=>p("br",null,null,-1))),C=u("replicas: "),R={class:"pod-container"},S={class:"table"},x=E((()=>p("thead",null,[p("tr",null,[p("th",{scope:"col"},"Pod Name"),p("th",{scope:"col"},"Status"),p("th",{scope:"col"},"Node Info"),p("th",{scope:"col"},"CreateTime"),p("th",{scope:"col"},"Json Info"),p("th",{scope:"col"},"Action")])],-1))),A={class:"color-gray"},q=E((()=>p("div",null,"等待中",-1))),z={class:"color-red"},F={class:"color-gray"},O={class:"color-gray"},V=["href"],J=["onClick"];var K=a(t({setup(a){const t=n((()=>e((()=>import("./PodEventDetail.851688a4.js")),["assets/PodEventDetail.851688a4.js","assets/PodEventDetail.68537233.css","assets/index.257cab03.js","assets/index.35b5e788.css","assets/vendor.fd49238e.js","assets/deployment.efd82eeb.js"])));let I=s({Item:{},Error:"",Pods:[]}),_=s({Params:{name:"",namespace:""}});const w=s({LoopData:!1}),E=o(),K=async function(){const a=_.Params;let e=await j.getDeploymentByName(a.namespace,a.name);I.Item=e.data,I.Error=e.error},M=async function(){const a=_.Params;let e=await j.getDeploymentPodsByName(a.namespace,a.name);I.Pods=e.data.sort(((a,e)=>a.name>=e.name?1:-1))},U=function(a){j.setDeploymentReplicas(a.namespace,a.name,a.replicas)};let G=function(a){return""===a.status.reason};const H=function(a){return`http://127.0.0.1:8088/k8sailor/v0/pods/${a.name}/output?namespace=${a.namespace}&outputFormat=json`};return l((()=>{w.LoopData=!0,_.Params.name=E.currentRoute.value.params.name,_.Params.namespace=E.currentRoute.value.query.namespace,K(),M(),async function(){for(;w.LoopData;)M(),await new Promise((a=>setTimeout(a,1e3)))}()})),c((()=>{w.LoopData=!1})),(a,e)=>(m(),r(P,null,[$,p("div",L,[u(" namespace: "+d(i(I).Item.namespace)+"   deployment: "+d(i(I).Item.name)+"   ",1),T,C,y(p("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i(I).Item.replicas=a),onKeyup:e[1]||(e[1]=v((a=>U(i(I).Item)),["enter"]))},null,544),[[f,i(I).Item.replicas]]),p("button",{onClick:e[2]||(e[2]=a=>U(i(I).Item))},"设置")]),p("div",R,[p("table",S,[x,p("tbody",null,[(m(!0),r(P,null,b(i(I).Pods,((a,e)=>(m(),r("tr",{key:a.name},[p("td",null,[p("div",null,d(a.name),1),p("div",A,d(a.podIp),1),p("div",null,[i(G)(a)?k("",!0):(m(),g(D,{key:0},{default:h((()=>[p("div",null,[N(i(t),{pod:a,namespace:a.namespace,name:a.name},null,8,["pod","namespace","name"])])])),fallback:h((()=>[q])),_:2},1024))])]),p("td",null,[i(G)(a)?(m(),r(P,{key:0},[u(d(a.status.phase),1)],64)):k("",!0),p("div",null,[p("p",z,d(a.status.reason),1),p("p",F,d(a.status.message),1)])]),p("td",null,[p("div",null,d(a.nodeName),1),p("div",O,d(a.nodeIp),1)]),p("td",null,d(a.createTime),1),p("td",null,[p("a",{href:H(a),target:"_blank"},"详细信息",8,V)]),p("td",null,[p("button",{class:"btn btn-danger",onClick:e=>async function(a){B.deletePodByName(a.namespace,a.name)}(a)},"删除",8,J)])])))),128))])])])],64))}}),[["__scopeId","data-v-6e013e19"]]),M=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:K});export{M as D,B as c};
